# web_app
Тестовое задание: Веб-сервис для управления движением денежных средств (ДДС)

# Описание приложения **main**

**main** — это приложение Django, которое отвечает за отображение главной страницы веб-приложения.  

### Основной функционал:
1. **Представление**:
   - Функция `index` в файле `views.py` обрабатывает запросы к главной странице.  
   - Возвращается шаблон `'main/index.html'` с переданными данными, включая заголовок страницы.  

2. **Маршруты**:
   - В файле `urls.py` настроен маршрут для главной страницы (`path('', views.index, name='home')`).  
   - Имя маршрута — `'home'`, что упрощает ссылку на главную страницу.  

3. **Шаблоны**:
   - **`layout.html`**:  
     - Базовый шаблон с подключением стилей Bootstrap, кастомного CSS (`main/css/main.css`) и иконок Font Awesome.  
     - Содержит боковую панель с логотипом, названием приложения ("ДДС") и навигацией (ссылки на главную страницу, транзакции и добавление новой транзакции).  
     - Определяет блоки для заголовка страницы `{% block title %}` и основного контента `{% block content %}`.  
   - **`index.html`**:  
     - Наследует `layout.html`.  
     - Определяет содержимое страницы:  
       - Заголовок `<h1>` и приветственное сообщение `<p>Всем привет</p>`.  

### Структура приложения:
- **`views.py`**: содержит логику обработки запросов.  
- **`urls.py`**: отвечает за маршрутизацию.  
- **Шаблоны**:  
  - **`main/templates/main/layout.html`**: базовый шаблон.  
  - **`main/templates/main/index.html`**: шаблон главной страницы.  


# Описание приложения **transaction**

Приложение **transaction** предназначено для управления транзакциями. Оно включает в себя создание, отображение, редактирование и удаление транзакций.

#### Функции и представления:

1. **tran_home**  
   Функция для отображения списка транзакций:
   - Все транзакции сортируются по дате создания (от новых к старым).
   - Передает список транзакций в шаблон `tran_home.html`, где для каждой транзакции выводятся основные данные, включая дату, статус, тип, категорию, подкатегорию, сумму и комментарий.
   - Если транзакции отсутствуют, отображается сообщение "Нет записей".

2. **TranDetailView**  
   Класс на основе `DetailView` для отображения подробной информации о транзакции:
   - Использует модель `Chek`.
   - Шаблон: `detail_view.html`.
   - Контекстное имя объекта: `transaction`.
   - Отображаются все детали транзакции, включая даты создания и изменения, статус, тип, категорию, подкатегорию, сумму и комментарий.
   - Включает кнопки для редактирования и удаления транзакции.

3. **TranUpdateView**  
   Класс на основе `UpdateView` для редактирования транзакции:
   - Использует модель `Chek`.
   - Шаблон: `create.html` (тот же шаблон используется для создания и редактирования).
   - Использует форму `ChekForm` для редактирования данных транзакции.

4. **TranDeleteView**  
   Класс на основе `DeleteView` для удаления транзакции:
   - Использует модель `Chek`.
   - После успешного удаления перенаправляет пользователя на страницу списка транзакций.
   - Шаблон: `transaction-delete.html`.
   - Включает форму с кнопкой для подтверждения удаления.

5. **create**  
   Функция для создания новой транзакции:
   - Если форма отправлена методом `POST` и валидна, транзакция сохраняется в базе данных, и пользователь перенаправляется на главную страницу.
   - Если форма неверна, отображается сообщение об ошибке.
   - Использует форму `ChekForm` для ввода данных о транзакции.

#### Шаблоны:

- **tran_home.html**  
  Отображает список всех транзакций. Для каждой транзакции выводятся дата создания, статус, тип, категория, подкатегория, сумма и комментарий. Включает ссылки на подробную информацию, редактирование и удаление.

- **detail_view.html**  
  Показывает подробную информацию о транзакции, включая все ее поля. Включает кнопки для редактирования и удаления транзакции.

- **create.html**  
  Шаблон для формы создания и редактирования транзакции. Включает поля для ввода статуса, типа, категории, подкатегории, суммы и комментария.

- **transaction-delete.html**  
  Шаблон для подтверждения удаления транзакции. Включает форму с кнопкой для подтверждения удаления.

### URL-конфигурация:

Приложение **transaction** использует следующие URL-адреса:

1. **`path('', views.tran_home, name='tran_home')`**  
   - Отображает список всех транзакций.
   - Используется представление `tran_home`.

2. **`path('create', views.create, name='create')`**  
   - Открывает форму для создания новой транзакции.
   - Используется представление `create`.

3. **`path('<int:pk>', views.TranDetailView.as_view(), name='tran-detail')`**  
   - Отображает подробную информацию о транзакции по ее идентификатору (`pk`).
   - Используется класс `TranDetailView`.

4. **`path('<int:pk>/update', views.TranUpdateView.as_view(), name='tran-update')`**  
   - Открывает форму для редактирования транзакции по ее идентификатору (`pk`).
   - Используется класс `TranUpdateView`.

5. **`path('<int:pk>/delete', views.TranDeleteView.as_view(), name='tran-delete')`**  
   - Позволяет удалить транзакцию по ее идентификатору (`pk`).
   - Используется класс `TranDeleteView`.

### Модели:

Приложение **transaction** использует следующие модели:

1. **Type**  
   Модель для хранения типов транзакций.  
   - Поле: `name` (тип транзакции).  
   - Используется для связки транзакции с ее типом.

2. **Status**  
   Модель для хранения статусов транзакций.  
   - Поле: `name` (статус транзакции).  
   - Используется для указания текущего статуса транзакции.

3. **Category**  
   Модель для хранения категорий транзакций.  
   - Поле: `name` (категория транзакции).  
   - Используется для классификации транзакций по категориям.

4. **SubCategory**  
   Модель для хранения подкатегорий транзакций.  
   - Поля: `name` (подкатегория) и `category` (связь с категорией).
   - Используется для уточнения подкатегории транзакции в рамках категории.

5. **Chek**  
   Основная модель для транзакций.  
   - Поля:
     - `date_create` (дата создания).
     - `date_update` (дата последнего обновления).
     - `status` (связь с моделью `Status`).
     - `type` (связь с моделью `Type`).
     - `category` (связь с моделью `Category`).
     - `sub_categoty` (связь с моделью `SubCategory`).
     - `summ` (сумма транзакции).
     - `coment` (комментарий к транзакции).
   - Метод `get_absolute_url` возвращает URL для отображения подробной информации о транзакции.

---

# Инструкции по запуску проекта

1. **Клонируйте репозиторий:**
   Склонируйте проект на ваш локальный компьютер:
   ```bash
   git clone <URL_репозитория>
   cd <папка_с_проектом>
   ```

2. **Активируйте виртуальное окружение:**
3. 
   - Для Windows:
     ```bash
     venv\Scripts\activate
     ```
   - Для macOS/Linux:
     ```bash
     source venv/bin/activate
     ```

4. **Установите зависимости:**
   Установите Django (и другие зависимости, если нужно):
   ```bash
   pip install django
   ```

5. **Примените миграции:**
   Если в проекте уже есть миграции, примените их для создания таблиц в базе данных SQLite:
   ```bash
   python manage.py migrate
   ```

6. **Создайте суперпользователя (если нужно):**
   Для доступа к админке создайте суперпользователя:
   ```bash
   python manage.py createsuperuser
   ```

7. **Запустите сервер:**
   Запустите сервер разработки:
   ```bash
   python manage.py runserver
   ```

8. **Откройте проект в браузере:**
   Перейдите по адресу:
   ```
   http://127.0.0.1:8000/
   ```

9. **Доступ к админке (по желанию):**
   Для доступа к админке используйте:
   ```
   http://127.0.0.1:8000/admin/
   ```
   Войдите с учетными данными суперпользователя.

---


